window.bioEp={bgEl:{},popupEl:{},closeBtnEl:{},shown:!1,overflowDefault:"visible",transformDefault:"",width:"auto",height:"auto",html:"",css:"",fonts:[],delay:1,showOnDelay:!1,cookieExp:0,popupId:0,script:"",pages_visited:0,minPages:0,cookieManager:{create:function(e,t,i){var o="";if(i){var s=new Date;s.setTime(s.getTime()+24*i*60*60*1e3),o="; expires="+s.toGMTString()}document.cookie=e+"="+t+o+"; path=/"},get:function(e){for(var t=e+"=",i=document.cookie.split(";"),o=0;o<i.length;o++){for(var s=i[o];" "==s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return null},erase:function(e){this.create(e,"",-1)}},checkPages:function(){var e=this.cookieManager.get("bioep_pages_visited"),t=1;return"NaN"!=e&&null!=e?(t=parseInt(e)+1,this.cookieManager.create("bioep_pages_visited",t),t<this.minPages):(this.cookieManager.create("bioep_pages_visited",1),!0)},checkCookie:function(){return this.cookieExp<=0?(this.cookieManager.erase("bioep_shown"),this.cookieManager.erase("bioep_pages_visited"),!1):"true"==this.cookieManager.get("bioep_shown")},addCSS:function(){for(var e=0;e<this.fonts.length;e++){var t=document.createElement("link");t.href=this.fonts[e],t.type="text/css",t.rel="stylesheet",document.head.appendChild(t)}var i=document.createTextNode(this.css),o=document.createElement("style");o.type="text/css",o.appendChild(i),document.head.insertBefore(o,document.getElementsByTagName("style")[0])},addPopup:function(){this.bgEl=document.createElement("div"),this.bgEl.id="bio_ep_bg",document.body.appendChild(this.bgEl),document.getElementById("bio_ep")?this.popupEl=document.getElementById("bio_ep"):(this.popupEl=document.createElement("div"),this.popupEl.id="bio_ep",this.popupEl.innerHTML=this.html,document.body.appendChild(this.popupEl)),this.closeBtnEl=document.createElement("div"),this.closeBtnEl.id="bio_ep_close",this.closeBtnEl.appendChild(document.createTextNode("X")),this.popupEl.insertBefore(this.closeBtnEl,this.popupEl.firstChild)},trackImpressions:function(){$.post(this.script,{popupId:this.popupId,operation:"exitIntentImpression"},function(e){},"json")},showPopup:function(){this.shown||(this.bgEl.style.display="block",this.popupEl.style.display="block",this.scalePopup(),this.overflowDefault=document.body.style.overflow,document.body.style.overflow="hidden",this.trackImpressions(),this.cookieManager.create("bioep_shown","true",this.cookieExp),this.shown=!0)},showThankYou:function(){$("#bio_ep").hide(),$("#bio_ep_thanks").show(),setTimeout(function(){$("#bio_ep_thanks").hide(),$("#bio_ep_bg").fadeOut("fast"),document.body.style.overflow=this.overflowDefault},4e3)},hidePopup:function(){this.bgEl.style.display="none",this.popupEl.style.display="none",document.body.style.overflow=this.overflowDefault},scalePopup:function(){var e={width:40,height:40},t={width:bioEp.popupEl.offsetWidth,height:bioEp.popupEl.offsetHeight},i={width:window.innerWidth,height:window.innerHeight},o={width:0,height:0},s=t.width/t.height;t.width>i.width-e.width&&(o.width=i.width-e.width,o.height=o.width/s,o.height>i.height-e.height&&(o.height=i.height-e.height,o.width=o.height*s)),0===o.height&&t.height>i.height-e.height&&(o.height=i.height-e.height,o.width=o.height*s);var h=o.width/t.width;(h<=0||h>1)&&(h=1),""===this.transformDefault&&(this.transformDefault=window.getComputedStyle(this.popupEl,null).getPropertyValue("transform")),this.popupEl.style.transform=this.transformDefault+" scale("+h+")"},loadEvents:function(){document.addEventListener("mouseout",function(e){var t=(e=e||window.event).relatedTarget||e.toElement,i=window.pageYOffset||document.documentElement.scrollTop;t&&"HTML"!=t.nodeName||e.pageY-i<5&&bioEp.showPopup()}),this.closeBtnEl.addEventListener("click",function(){bioEp.hidePopup()}),window.addEventListener("resize",function(){bioEp.scalePopup()})},setOptions:function(e){this.width=void 0===e.width?this.width:e.width,this.height=void 0===e.height?this.height:e.height,this.html=void 0===e.html?this.html:e.html,this.css=void 0===e.css?this.css:e.css,this.fonts=void 0===e.fonts?this.fonts:e.fonts,this.delay=void 0===e.delay?this.delay:e.delay,this.showOnDelay=void 0===e.showOnDelay?this.showOnDelay:e.showOnDelay,this.cookieExp=void 0===e.cookieExp?this.cookieExp:e.cookieExp,this.popupId=void 0===e.popupId?this.popupId:e.popupId,this.script=void 0===e.script?this.script:e.script,this.minPages=void 0===e.minPages?this.minPages:e.minPages},domReady:function(e){"interactive"===document.readyState||"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",e)},init:function(e){this.domReady(function(){void 0!==e&&bioEp.setOptions(e),bioEp.minPages>0&&bioEp.checkPages()||bioEp.checkCookie()||(bioEp.addCSS(),bioEp.addPopup(),setTimeout(function(){bioEp.loadEvents(),bioEp.showOnDelay&&bioEp.showPopup()},1e3*bioEp.delay))})}};